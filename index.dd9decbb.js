const connection=new WebSocket("wss://websocket-chat-backend1.glitch.me");let username,online=0;connection.onopen=()=>{console.log("connected"),username=prompt("Input your name","User")||"Anonymous"},connection.onclose=()=>{console.error("disconnected")},connection.onerror=e=>{console.error("failed to connect",e)},connection.onmessage=e=>{let n=JSON.parse(e.data);if(document.querySelector(".online").textContent=`${n.online} ONLINE`,null!=n.username){let e=document.querySelector("#chat"),t=document.createElement("div");t.setAttribute("class","other-message_wrapper"),t.innerHTML=`\n            <div class="other-message_block">\n                <label>${n.username}:</label>\n                <p class="other-message">${n.message}</p>\n                <label class="time">${n.date}</label>\n            </div>\n        `,e.appendChild(t),e.scrollTop=e.scrollHeight}},document.querySelector("form").addEventListener("submit",(e=>{e.preventDefault();let n=document.querySelector("#message").value;if(n.length&&n.trim()){let e=(new Date).toLocaleTimeString([],{hour12:!1}),t={username:username,message:n,date:e};connection.send(JSON.stringify(t)),ownMessage(n),document.querySelector("#message").value=""}}));const ownMessage=e=>{let n=(new Date).toLocaleTimeString([],{hour12:!1}),t=document.querySelector("#chat"),o=document.createElement("div");o.setAttribute("class","my-message_wrapper"),o.innerHTML=`\n        <div class="my-message_block">\n            <div>\n                <label>${username}:</label>\n                <p class="my-message">${e}</p>\n                <label class="time">${n}</label>\n            </div>\n        </div>\n      `,t.appendChild(o),t.scrollTop=t.scrollHeight};
//# sourceMappingURL=index.dd9decbb.js.map
