{"mappings":"AAAA,MAAMA,WAAa,IAAIC,UAAU,2CACjC,IAAIC,SAEJF,WAAWG,OAAM,KACbC,QAAQC,IAAI,aACZH,SAAWI,OAAO,kBAAmB,SAGzCN,WAAWO,QAAO,KACdH,QAAQI,MAAM,iBAGlBR,WAAWS,QAAUD,IACjBJ,QAAQI,MAAM,oBAAqBA,IAGvCR,WAAWU,UAAYC,IACnB,IAAIC,EAAMC,KAAKC,MAAMH,EAAMI,MACvBC,EAAmBC,SAASC,cAAc,SAC1CC,EAAKF,SAASG,cAAc,OAChCD,EAAGE,aAAa,QAAS,uBACzBF,EAAGG,UAAS,oBACCV,EAAIV,uDACcU,EAAIW,4CACTX,EAAIY,qBAE9BR,EAAiBS,YAAYN,GAC7BH,EAAiBU,UAAYV,EAAiBW,cAGlDV,SAASC,cAAc,QAAQU,iBAAiB,UAAUjB,IACtDA,EAAMkB,iBACN,IAAIN,EAAUN,SAASC,cAAc,YAAYY,MACjD,GAAGP,EAAQQ,QAAUR,EAAQS,OAAO,CAChC,IAAIC,GAAO,IAAIC,MAAOC,mBAAmB,GAAI,CACzCC,QAAQ,IAERC,EAAM,CACNnC,SAAUA,SACVqB,QAASA,EACTC,KAAMS,GAEVjC,WAAWsC,KAAKzB,KAAK0B,UAAUF,IAC/BG,WAAWjB,GACXN,SAASC,cAAc,YAAYY,MAAQ,OAInD,MAAMU,WAAcjB,IAChB,IAAIU,GAAO,IAAIC,MAAOC,mBAAmB,GAAI,CAAEC,QAAQ,IACnDpB,EAAmBC,SAASC,cAAc,SAC1CC,EAAKF,SAASG,cAAc,OAChCD,EAAGE,aAAa,QAAS,oBACzBF,EAAGG,UAAS,sBACGpB,sDACeqB,wCACFU,oBAE5BjB,EAAiBS,YAAYN,GAC7BH,EAAiBU,UAAYV,EAAiBW","sources":["client/chat.js"],"sourcesContent":["const connection = new WebSocket('wss://websocket-chat-backend1.glitch.me');\r\nlet username;\r\n\r\nconnection.onopen = () => {\r\n    console.log('connected');\r\n    username = prompt('Input your name', 'User');\r\n};\r\n\r\nconnection.onclose = () => {\r\n    console.error('disconnected');\r\n};\r\n\r\nconnection.onerror = error => {\r\n    console.error('failed to connect', error);\r\n};\r\n\r\nconnection.onmessage = event => {\r\n    let obj = JSON.parse(event.data)\r\n    let messageContainer = document.querySelector('#chat');\r\n    let el = document.createElement('div');\r\n    el.setAttribute('class', 'other-message_block');\r\n    el.innerHTML = `\r\n        <label>${obj.username}:</label>\r\n        <p class=\"other-message\">${obj.message}</p>\r\n        <label class=\"time\">${obj.date}</label>\r\n    `;\r\n    messageContainer.appendChild(el);\r\n    messageContainer.scrollTop = messageContainer.scrollHeight;\r\n};\r\n\r\ndocument.querySelector('form').addEventListener('submit', event => {\r\n    event.preventDefault();\r\n    let message = document.querySelector('#message').value;\r\n    if(message.length && message.trim()){\r\n        let time = new Date().toLocaleTimeString([], {\r\n            hour12: false\r\n        });\r\n        let msg = {\r\n            username: username,\r\n            message: message,\r\n            date: time\r\n        };\r\n        connection.send(JSON.stringify(msg));\r\n        ownMessage(message)\r\n        document.querySelector('#message').value = '';\r\n    }\r\n});\r\n\r\nconst ownMessage = (message) => {\r\n    let time = new Date().toLocaleTimeString([], { hour12: false });\r\n    let messageContainer = document.querySelector('#chat');\r\n    let el = document.createElement('div');\r\n    el.setAttribute('class', 'my-message_block');\r\n    el.innerHTML = `\r\n          <label>${username}:</label>\r\n          <p class=\"my-message\">${message}</p>\r\n          <label class=\"time\">${time}</label>\r\n      `;\r\n    messageContainer.appendChild(el);\r\n    messageContainer.scrollTop = messageContainer.scrollHeight;\r\n}"],"names":["connection","WebSocket","username","onopen","console","log","prompt","onclose","error","onerror","onmessage","event","obj","JSON","parse","data","messageContainer","document","querySelector","el","createElement","setAttribute","innerHTML","message","date","appendChild","scrollTop","scrollHeight","addEventListener","preventDefault","value","length","trim","time","Date","toLocaleTimeString","hour12","msg","send","stringify","ownMessage"],"version":3,"file":"index.2d8be318.js.map"}